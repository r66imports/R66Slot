<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Wix Studio Editor</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="workspace">
    <header class="top-bar">
        <div style="display:flex; gap:8px;">
            <button class="btn-main" onclick="togglePreview()" id="prev-btn">Preview</button>
            <button class="btn-main" style="background:#27ae60" onclick="exportHTML()">Export</button>
            <button class="btn-main" style="background:#2980b9" onclick="saveToCloud()">Save</button>
            <button class="btn-main" style="background:#f39c12" onclick="loadFromCloud()">Load</button>
        </div>
        <div style="display:flex; gap:15px; font-size:18px;">
            <span onclick="setBreakpoint('desktop')" style="cursor:pointer">üñ•Ô∏è</span>
            <span onclick="setBreakpoint('tablet')" style="cursor:pointer">üì±</span>
            <span onclick="setBreakpoint('mobile')" style="cursor:pointer">üì≤</span>
        </div>
        <button id="theme-toggle" style="background:none; border:none; cursor:pointer; font-size:20px;">üåô</button>
    </header>

    <nav class="side-nav">
        <button class="btn-main" style="border-radius:50%; width:35px; height:35px; padding:0;" onclick="toggleAddMenu()">+</button>
    </nav>

    <aside class="left-sidebar">
        <div id="add-menu" style="display:none; padding:15px; border-bottom:1px solid var(--border-color);">
            <button class="btn-main" style="width:100%; margin-bottom:5px;" onclick="spawn('box')">Rectangle</button>
            <button class="btn-main" style="width:100%; margin-bottom:5px;" onclick="spawn('text')">Text Block</button>
            <button class="btn-main" style="width:100%; margin-bottom:5px;" onclick="spawn('img')">Image</button>
            <button class="btn-main btn-container" style="width:100%;" onclick="addContainer()">
                <span class="container-icon">‚ñ£</span> Container Box
            </button>
        </div>
        <div class="sidebar-header">LAYERS</div>
        <div id="layer-stack"></div>
        <div class="sidebar-header">HISTORY</div>
        <div id="history-stack"></div>
    </aside>

    <main class="canvas-container">
        <div id="canvas-area" onclick="deselect(event)"></div>
    </main>

    <aside class="inspector">
        <div class="sidebar-header">INSPECTOR</div>
        <div id="no-sel" style="padding:40px; text-align:center; color:var(--text-dim); font-size:12px;">Select an element</div>
        <div id="inspector-ui" style="display:none;">
            <div class="prop-group">
                <label style="font-size:9px; color:var(--text-dim)">POSITION & SIZE</label>
                <div style="display:grid; grid-template-columns:1fr 1fr; gap:8px; margin-top:8px;">
                    <div><label>W</label><input type="number" id="in-w" onchange="applyInspector()"></div>
                    <div><label>H</label><input type="number" id="in-h" onchange="applyInspector()"></div>
                    <div><label>X</label><input type="number" id="in-x" onchange="applyInspector()"></div>
                    <div><label>Y</label><input type="number" id="in-y" onchange="applyInspector()"></div>
                </div>
            </div>
            <div class="prop-group">
                <label style="font-size:9px; color:var(--text-dim)">MOTION</label>
                <select id="anim-type">
                    <option value="none">No Animation</option>
                    <option value="fade-in">Fade In</option>
                </select>
                <button class="btn-main" style="width:100%; background:#444;" onclick="playAnim()">Preview</button>
            </div>
            <div class="prop-group">
                <label style="font-size:9px; color:var(--text-dim)">ROTATION</label>
                <div style="display:flex; align-items:center; gap:10px; margin-top:8px;">
                    <input type="range" id="in-rotate" min="0" max="360" value="0"
                           oninput="updateRotation(this.value)">
                    <span id="rotate-val" style="font-size:12px; min-width:30px;">0¬∞</span>
                </div>
            </div>
            <!-- Container info (shown when a container is selected) -->
            <div class="prop-group" id="container-info" style="display:none;">
                <label style="font-size:9px; color:var(--text-dim)">CONTAINER</label>
                <p style="font-size:11px; color:var(--text-dim); margin:8px 0 0;">
                    Drop images inside this container. Children are clipped and bounded.
                </p>
                <div style="margin-top:8px; font-size:11px;">
                    <span>Children: </span><span id="container-child-count">0</span>
                </div>
            </div>
            <div class="prop-group">
                <button class="btn-main" style="width:100%; background:#c0392b;" onclick="deleteElement()">Delete Element</button>
            </div>
        </div>
    </aside>
</div>

<!-- Hidden file input for image uploads -->
<input type="file" id="image-upload" accept="image/*" style="display:none;" onchange="handleImageUpload(event)">

<script src="script.js"></script>
</body>
</html>
