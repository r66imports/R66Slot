<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Wix Studio Editor</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<header class="dashboard-header">
    <div class="header-left">
        <span class="site-logo">R66 Studio</span>
    </div>

    <nav class="header-nav">
        <div class="dropdown">
            <button class="dropbtn">Site <i class="arrow down"></i></button>
            <div class="dropdown-content">
                <a href="#">Site Settings</a>
                <a href="#">Release History</a>
                <a href="#">Connect Domain</a>
            </div>
        </div>

        <div class="dropdown">
            <button class="dropbtn">Tools <i class="arrow down"></i></button>
            <div class="dropdown-content">
                <a href="#">Grid Overlay</a>
                <a href="#">Asset Manager</a>
                <a href="#">Code Console</a>
            </div>
        </div>
    </nav>

    <div class="header-right">
        <button class="publish-btn">Publish</button>
    </div>
</header>

<div class="workspace">
    <header class="top-bar">
        <div style="display:flex; gap:8px;">
            <button class="btn-main" onclick="togglePreview()" id="prev-btn">Preview</button>
            <button class="btn-main" style="background:#27ae60" onclick="exportHTML()">Export</button>
            <button class="btn-main" style="background:#2980b9" onclick="saveToCloud()">Save</button>
            <button class="btn-main" style="background:#f39c12" onclick="loadFromCloud()">Load</button>
        </div>
        <div style="display:flex; gap:15px; font-size:18px;">
            <span onclick="setBreakpoint('desktop')" style="cursor:pointer">üñ•Ô∏è</span>
            <span onclick="setBreakpoint('tablet')" style="cursor:pointer">üì±</span>
            <span onclick="setBreakpoint('mobile')" style="cursor:pointer">üì≤</span>
        </div>
        <button id="theme-toggle" style="background:none; border:none; cursor:pointer; font-size:20px;">üåô</button>
    </header>

    <nav class="side-nav">
        <button class="btn-main side-btn" title="Add Element" onclick="toggleAddMenu()">+</button>
        <button class="btn-main side-btn" title="Templates" onclick="toggleTemplateMenu()" style="background:#e67e22; font-size:14px;">T</button>
    </nav>

    <aside class="left-sidebar">
        <!-- Add Element Menu -->
        <div id="add-menu" style="display:none; padding:15px; border-bottom:1px solid var(--border-color);">
            <button class="btn-main" style="width:100%; margin-bottom:5px;" onclick="spawn('box')">Rectangle</button>
            <button class="btn-main" style="width:100%; margin-bottom:5px;" onclick="spawn('text')">Text Block</button>
            <button class="btn-main" style="width:100%; margin-bottom:5px;" onclick="spawn('img')">Image</button>
            <button class="btn-main btn-container" style="width:100%;" onclick="addContainer()">
                <span class="container-icon">‚ñ£</span> Container Box
            </button>
        </div>

        <!-- Templates Menu -->
        <div id="template-menu" style="display:none;">
            <div class="sidebar-header">TEMPLATES</div>
            <p style="padding:10px 15px; font-size:10px; color:var(--text-dim);">
                Choose a template to populate the canvas. This replaces current content.
            </p>
            <div class="template-grid">
                <button class="template-card" onclick="loadTemplate('brands')">
                    <div class="template-preview template-preview-brands">
                        <div class="tp-nav"></div>
                        <div class="tp-hero"></div>
                        <div class="tp-cards"><div class="tp-card-red"></div><div class="tp-card-dark"></div></div>
                        <div class="tp-footer"></div>
                    </div>
                    <span class="template-name">Brands Page</span>
                    <span class="template-desc">r66slot.co.za/brands/nsr clone</span>
                </button>
                <button class="template-card" onclick="loadTemplate('blank')">
                    <div class="template-preview template-preview-blank">
                        <div style="width:100%;height:100%;background:#f9f9f9;border-radius:4px;"></div>
                    </div>
                    <span class="template-name">Blank Canvas</span>
                    <span class="template-desc">Start from scratch</span>
                </button>
            </div>
        </div>

        <div class="sidebar-header">LAYERS</div>
        <div id="layer-stack"></div>
        <div class="sidebar-header">HISTORY</div>
        <div id="history-stack"></div>
    </aside>

    <main class="canvas-container">
        <div id="canvas-area" onclick="deselect(event)"></div>
    </main>

    <aside class="inspector">
        <div class="sidebar-header">INSPECTOR</div>
        <div id="no-sel" style="padding:40px; text-align:center; color:var(--text-dim); font-size:12px;">Select an element</div>
        <div id="inspector-ui" style="display:none;">
            <div class="prop-group">
                <label style="font-size:9px; color:var(--text-dim)">POSITION & SIZE</label>
                <div style="display:grid; grid-template-columns:1fr 1fr; gap:8px; margin-top:8px;">
                    <div><label>W</label><input type="number" id="in-w" onchange="applyInspector()"></div>
                    <div><label>H</label><input type="number" id="in-h" onchange="applyInspector()"></div>
                    <div><label>X</label><input type="number" id="in-x" onchange="applyInspector()"></div>
                    <div><label>Y</label><input type="number" id="in-y" onchange="applyInspector()"></div>
                </div>
            </div>
            <div class="prop-group">
                <label style="font-size:9px; color:var(--text-dim)">FILL & OPACITY</label>
                <div style="display:grid; grid-template-columns:1fr 1fr; gap:8px; margin-top:8px;">
                    <div>
                        <label>Fill</label>
                        <input type="color" id="in-fill" value="#6132ef" onchange="applyFill(this.value)" style="height:32px; padding:2px; cursor:pointer;">
                    </div>
                    <div>
                        <label>Opacity</label>
                        <input type="range" id="in-opacity" min="0" max="100" value="100" oninput="applyOpacity(this.value)" style="margin-bottom:0;">
                        <span id="opacity-val" style="font-size:11px; color:var(--text-dim);">100%</span>
                    </div>
                </div>
            </div>
            <div class="prop-group">
                <label style="font-size:9px; color:var(--text-dim)">MOTION</label>
                <select id="anim-type">
                    <option value="none">No Animation</option>
                    <option value="fade-in">Fade In</option>
                </select>
                <button class="btn-main" style="width:100%; background:#444;" onclick="playAnim()">Preview</button>
            </div>
            <div class="prop-group">
                <label style="font-size:9px; color:var(--text-dim)">ROTATION</label>
                <div style="display:flex; align-items:center; gap:10px; margin-top:8px;">
                    <input type="range" id="in-rotate" min="0" max="360" value="0"
                           oninput="updateRotation(this.value)">
                    <span id="rotate-val" style="font-size:12px; min-width:30px;">0¬∞</span>
                </div>
            </div>
            <!-- Container info (shown when a container is selected) -->
            <div class="prop-group" id="container-info" style="display:none;">
                <label style="font-size:9px; color:var(--text-dim)">CONTAINER</label>
                <p style="font-size:11px; color:var(--text-dim); margin:8px 0 0;">
                    Drop images inside this container. Children are clipped and bounded.
                </p>
                <div style="margin-top:8px; font-size:11px;">
                    <span>Children: </span><span id="container-child-count">0</span>
                </div>
            </div>
            <div class="prop-group">
                <button class="btn-main" style="width:100%; background:#c0392b;" onclick="deleteElement()">Delete Element</button>
            </div>
        </div>
    </aside>
</div>

<!-- Hidden file input for image uploads -->
<input type="file" id="image-upload" accept="image/*" style="display:none;" onchange="handleImageUpload(event)">

<script src="script.js"></script>
</body>
</html>
